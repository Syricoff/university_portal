# Университетский портал с системой учета посещаемости

![Главная страница портала](screenshots/main_page.png)

## Описание проекта

Университетский портал представляет собой веб-приложение на основе Flask для управления учебным процессом с акцентом на учет посещаемости студентов. Система поддерживает многоуровневую систему авторизации с различными правами доступа для администраторов, старост групп и студентов.

## Основные функции

### Авторизация пользователей

Система поддерживает разграничение доступа для трех типов пользователей:
- **Администраторы** - полный доступ ко всем функциям системы
- **Старосты групп** - управление посещаемостью своей группы
- **Студенты** - просмотр своего расписания и посещаемости

![Страница авторизации](screenshots/login_page.png)

### Управление группами и студентами

Администраторы могут создавать и редактировать группы студентов, добавлять новых студентов и назначать старост.

![Список групп](screenshots/groups_list.png)
![Список студентов](screenshots/students_list.png)

### Управление предметами и занятиями

Создание и редактирование учебных предметов, формирование расписания занятий.

![Список предметов](screenshots/subjects_list.png)
![Расписание занятий](screenshots/lessons_list.png)

### Учет посещаемости

Основная функция системы - учет посещаемости занятий. Поддерживаются следующие функции:
- Массовое заполнение посещаемости старостами групп
- Детальные отчеты по посещаемости с фильтрацией по датам, предметам и студентам
- Визуальное представление статистики посещаемости

![Журнал посещаемости](screenshots/attendance_list.png)
![Заполнение посещаемости](screenshots/attendance_bulk.png)
![Отчет по посещаемости](screenshots/attendance_report.png)

## Технические характеристики

### Стек технологий

- **Бэкенд**: Python 3.13+, Flask 3.0, SQLAlchemy 2.0
- **База данных**: SQLite (для разработки), поддержка PostgreSQL и MySQL для продакшена
- **Фронтенд**: HTML5, CSS3, Bootstrap 5, JavaScript
- **Система контроля доступа**: Собственная реализация на основе сессий Flask

### Архитектура проекта

Проект построен с использованием паттерна Application Factory и разделен на модули с помощью Flask Blueprints:

```
university_portal/
├── app/
│   ├── models/         # Модели данных SQLAlchemy
│   ├── routes/         # Маршруты (blueprints) для различных модулей  
│   ├── static/         # CSS, JavaScript, изображения
│   ├── templates/      # HTML шаблоны
│   └── utils/          # Утилиты и декораторы
├── migrations/        # Миграции базы данных
├── scripts/           # Вспомогательные скрипты
└── instance/          # Экземпляр базы данных
```

### Схема базы данных

![Схема базы данных](screenshots/database_schema.png)

## Установка и запуск

### Требования

- Python 3.13 или выше
- pip для установки зависимостей

### Шаги установки

1. Клонирование репозитория:
```bash
git clone https://github.com/syricoff/university-portal.git
cd university-portal
```

2. Создание и активация виртуальной среды:
```bash
python -m venv venv
source venv/bin/activate  # Для Linux/Mac
venv\Scripts\activate     # Для Windows
```

3. Установка зависимостей:
```bash
pip install -r requirements.txt
```

4. Настройка переменных окружения:
```bash
cp .env.example .env
# Отредактируйте .env файл, установив необходимые параметры
```

5. Инициализация базы данных:
```bash
flask db upgrade
```

6. Заполнение тестовыми данными (опционально):
```bash
python scripts/seed_data.py
```

7. Запуск сервера для разработки:
```bash
flask run
```

После запуска приложение будет доступно по адресу [http://localhost:5000](http://localhost:5000)

## Особенности реализации

### Система контроля доступа

Приложение использует декораторы для контроля доступа к маршрутам:
- `login_required` - проверка авторизации пользователя
- `admin_required` - проверка прав администратора
- `group_admin_required` - проверка роли старосты группы
- `admin_or_group_admin_required` - проверка прав администратора или старосты группы

### Предотвращение дублирования записей посещаемости

В ходе разработки была обнаружена и решена проблема дублирования записей о посещаемости:
- Добавлено уникальное ограничение в модель Attendance для предотвращения будущих дубликатов
- Разработан скрипт для очистки существующих дубликатов
- Исправлена ошибка сравнения datetime с date в коде обработки посещаемости

## Вклад в проект

Мы приветствуем вклады в проект! Если вы хотите внести свой вклад:

1. Создайте форк репозитория
2. Создайте ветку для вашей функции (`git checkout -b feature/amazing-feature`)
3. Зафиксируйте изменения (`git commit -m 'Добавить новую функцию'`)
4. Отправьте изменения в вашу ветку (`git push origin feature/amazing-feature`)
5. Откройте Pull Request

## Будущие улучшения

- Добавление API для мобильного приложения
- Интеграция с системой учета успеваемости
- Автоматическая генерация расписания
- Внедрение механизма уведомлений для студентов и преподавателей

## Авторы

- [Syricoff](https://github.com/syricoff)

## Лицензия

Этот проект распространяется под лицензией MIT. Подробности в файле [LICENSE](LICENSE).

---

© 2024 Университетский портал. Все права защищены. 